<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Assignment3</title>
  <link rel="stylesheet" href="assignment3.css"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
</head>
<body>
  <div class="header">
    <span onclick="showModal()">회원가입</span>
  </div>
  <div class="main">
    <div class="sign-in-modal" id="modal">
      <span class="header-logo">
        <img src="image/logo.jpeg" alt="Logo">
      </span>
      <hr>
      <form class="sign-in-modal-form" onsubmit="return checkForm(event)">
        <div class="form-input-block">
          <div class="input-with-item">
            <span class="material-symbols-outlined">person</span>          
            <input class="sign-in-input" id="userId" placeholder="아이디" />
          </div>
          <div class="input-with-item">
            <span class="material-symbols-outlined">lock</span>
            <input class="sign-in-input" id="password" type="password" placeholder="비밀번호" />
          </div>
          <div class="input-with-item">
            <span class="material-symbols-outlined">mail</span>
            <input class="sign-in-input" id="email" placeholder="이메일" />
          </div>
          <div class="input-with-item">
            <span class="material-symbols-outlined">person</span>
            <input class="sign-in-input" id="username" placeholder="이름" />
          </div>
          <div class="input-with-item">
            <span class="material-symbols-outlined">badge</span>
            <input class="sign-in-input" id="birth" placeholder="생년월일" />
          </div>
          <div class="input-with-item">
            <span class="material-symbols-outlined">call</span>
            <input class="sign-in-input" id="phone" placeholder="전화번호" />
          </div>
          <div class="error-wrapper" id="error-wrapper">

          </div>
          <div class="button-wrapper">
            <button type="submit" class="signup-button">
              회원가입
            </button>
            <button type="button" class="close-button" onclick="closeModal()">
              닫기
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <script>
    function checkForm(e) {
      e.preventDefault(); // 기본 폼 제출 방지

      const $userId = document.getElementById('userId').value.trim();
      const $password = document.getElementById('password').value.trim();
      const $email = document.getElementById('email').value.trim();
      const $username = document.getElementById('username').value.trim();
      const $birth = document.getElementById('birth').value.trim();
      const $phone = document.getElementById('phone').value.trim();
      const $errorWrapper = document.getElementById('error-wrapper');

      $errorWrapper.innerHTML = ''; // 내용 초기화
      const errors = []; // 에러메시지들을 담을 배열

      // 아이디 검사
      if($userId.length < 3) {
        errors.push("아이디는 3글자 이상입니다.");
      }

      //비밀번호 검사
      if($password.length < 6) {
        errors.push("비밀번호는 6글자 이상입니다.");
      }

      //이메일 검사
      if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($email)) {
        errors.push("이메일 형식을 지켜야 합니다.");
      }

      // 생년월일 검사
      if (!/^\d{4}-\d{2}-\d{2}$/.test($birth)) {
        errors.push("생년월일은 YYYY-MM-DD와 같은 형식입니다.");
      }

      // 전화번호 검사
      if (!/^\d{11}$/.test($phone)) {
        errors.push("전화번호는 - 없이 숫자 11자입니다.");
      }

      // 공백 검사
      if (!$userId || !$password || !$email || !$username || !$birth || !$phone) {
        errors.push("위 입력항목 모두 공백일 수 없습니다.");
      }

      //에러 메시지 추가
      if (errors.length > 0) {
        $errorWrapper.innerHTML = errors.join('<br>');
        return false;
      }

      //success.html로 이동
      window.location.href = 'success.html';
      return false; 
    }

    function closeModal() {
      const $modal = document.getElementById('modal');
      $modal.style.display = 'none'; //modal 숨기기
    }

    function showModal() {
      const $modal = document.getElementById('modal');
      $modal.style.display = 'block'; //modal 나타내기
    }
  </script>
</body>
</html>
